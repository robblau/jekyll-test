<!DOCTYPE html>

<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <title>Publish API - Shotgun Developer</title>
  <link rel="stylesheet" href="/jekyll-test/assets/css/just-the-docs.css">
  
  <script type="text/javascript" src="/jekyll-test/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/jekyll-test/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>


  <div class="page-wrap">
    <div class="side-bar">
      <a href="/jekyll-test" class="site-title fs-6 lh-tight">Shotgun Developer</a>
      <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button" data-text-toggle="Hide">Menu</button></span>
      <div class="navigation main-nav js-main-nav">
        <nav>
  <ul class="navigation-list">
    
    
      
        
      
    
      
        
          <li class="navigation-list-item active">
            
            <a  href="/jekyll-test/app-reference/" 
               class="navigation-list-link"
            >
              Toolkit App Reference
              
            </a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item  active">
                      
                      <a  href="/jekyll-test/sphinx/tk-multi-publish2/" 
                         class="navigation-list-link"
                      >
                        Shotgun Publisher API reference, vX.Y.Z
                        
                      </a>
                      
                        
                        <ul class="navigation-list-child-list">
                          
                            
                              <li class="navigation-list-item  active">
                                <a  href="/jekyll-test/sphinx/tk-multi-publish2/api/" 
                                   class="navigation-list-link active"
                                >
                                  Publish API
                                  
                                </a>
                              </li>
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a  href="/jekyll-test/sphinx/tk-multi-publish2/application/" 
                                   class="navigation-list-link"
                                >
                                  App Interface
                                  
                                </a>
                              </li>
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a  href="/jekyll-test/sphinx/tk-multi-publish2/customizing/" 
                                   class="navigation-list-link"
                                >
                                  Publish Customization
                                  
                                </a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a  href="/jekyll-test/sphinx/tk-multi-publish2/logging/" 
                                   class="navigation-list-link"
                                >
                                  Logging
                                  
                                </a>
                              </li>
                            
                          
                            
                              <li class="navigation-list-item ">
                                <a  href="/jekyll-test/sphinx/tk-multi-publish2/utility/" 
                                   class="navigation-list-link"
                                >
                                  Utilities
                                  
                                </a>
                              </li>
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                            
                          
                        </ul>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </ul>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a  href="/jekyll-test/event_daemon/" 
               class="navigation-list-link"
            >
              Shotgun Event Daemon
              
            </a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a  href="/jekyll-test/framework-reference/" 
               class="navigation-list-link"
            >
              Toolkit Framework Reference
              
            </a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </ul>
            
          </li>
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a  href="/jekyll-test/sphinx/" 
               class="navigation-list-link"
            >
              Toolkit API Reference
              
            </a>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a  href="/jekyll-test/" 
               class="navigation-list-link"
            >
              Overview
              
            </a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a  href="/jekyll-test/rv/" 
               class="navigation-list-link"
            >
              RV
              
            </a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a  href="/jekyll-test/tk-dev/" 
               class="navigation-list-link"
            >
              Toolkit Development
              
            </a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a  href="/jekyll-test/tutorials/" 
               class="navigation-list-link"
            >
              Tutorials and Videos
              
            </a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a  href="/jekyll-test/release-notes/" 
               class="navigation-list-link"
            >
              Release Notes
              
            </a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a  href="/jekyll-test/kb/" 
               class="navigation-list-link"
            >
              Knowledge Base
              
            </a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a  href="https://google.com" target="_blank" 
               class="navigation-list-link"
            >
              Glossary
              
                  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16" version="1.1" width="14px" height="14px">
                  <g id="surface1">
                  <path style=" " d="M 9 2 L 9 3 L 12.292969 3 L 6.023438 9.273438 L 6.726563 9.976563 L 13 3.707031 L 13 7 L 14 7 L 14 2 Z M 4 4 C 2.894531 4 2 4.894531 2 6 L 2 12 C 2 13.105469 2.894531 14 4 14 L 10 14 C 11.105469 14 12 13.105469 12 12 L 12 7 L 11 8 L 11 12 C 11 12.550781 10.550781 13 10 13 L 4 13 C 3.449219 13 3 12.550781 3 12 L 3 6 C 3 5.449219 3.449219 5 4 5 L 8 5 L 9 4 Z "/>
                  </g>
                  </svg>
              
            </a>
            
          </li>
        
      
    
  </ul>
</nav>

      </div>
      <footer role="contentinfo" class="site-footer">
        <p class="text-small text-grey-dk-000 mb-0">|
        
            <a style="font-weight: bold;" href=" /jekyll-test/sphinx/tk-multi-publish2/api/ ">English</a> |
        
            <a  href=" /jekyll-test/sv/sphinx/tk-multi-publish2/api/ ">Svenska</a> |
        
            <a  href=" /jekyll-test/ja/sphinx/tk-multi-publish2/api/ ">日本語</a> |
        
        </p>
      </footer>
    </div>
    <div class="main-content-wrap">
      <div class="page-header">
        <div class="main-content">
          
          <div class="search js-search">
            <div class="search-input-wrap">
              <input type="text" class="js-search-input search-input" placeholder="Search Shotgun Developer" aria-label="Search Shotgun Developer" autocomplete="off">
              <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg>
            </div>
            <div class="js-search-results search-results-wrap"></div>
          </div>
          
          
        </div>
      </div>
      <div class="main-content">
        
          
            <nav class="breadcrumb-nav">
              <ol class="breadcrumb-nav-list">
                
                  <li class="breadcrumb-nav-list-item"><a href="">Toolkit App Reference</a></li>
                  <li class="breadcrumb-nav-list-item"><a href="">Shotgun Publisher API reference, vX.Y.Z</a></li>
                
                <li class="breadcrumb-nav-list-item"><span>Publish API</span></li>
              </ol>
            </nav>
          
        
        <div class="page-content">
          <h1 id="publish-api">Publish API</h1>

<p>The publish API gives developers access to the underlying data structures and
methods used by the publish UI. They can use this interface to build more
advanced custom publish workflows.</p>

<p>The primary interface to the API is the PublishManager class which
exposes the same <code class="highlighter-rouge">collection</code>, <code class="highlighter-rouge">validation</code>, <code class="highlighter-rouge">publish</code>, and <code class="highlighter-rouge">finalize</code>
methods that drive the Publisher UI. The manager contains a reference to a
PublishTree instance that operates on the hierarchy of
PublishItem instances (the “things” to be published), each of which
can have associated PublishTask instances that define how the
items are to be processed.</p>

<p>The code below shows how to execute a complete publish using this API:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># need to have an engine running in a context where the publisher has been
# configured.
engine = sgtk.platform.current_engine()

# get the publish app instance from the engine's list of configured apps
publish_app = engine.apps.get("tk-multi-publish2")

# ensure we have the publisher instance.
if not publish_app:
    raise Exception("The publisher is not configured for this context.")

# create a new publish manager instance
manager = publish_app.create_publish_manager()

# now we can run the collector that is configured for this context
manager.collect_session()

# collect some external files to publish
manager.collect_files([path1, path2, path3])

# validate the items to publish
tasks_failed_validation = manager.validate()

# oops, some tasks are invalid. see if they can be fixed
if tasks_failed_validation:
    fix_invalid_tasks(tasks_failed_validation)
    # try again here or bail

# all good. let's publish and finalize
try:
    manager.publish()
    # If a plugin needed to version up a file name after publish
    # it would be done in the finalize.
    manager.finalize()
except Exception as error:
    logger.error("There was trouble trying to publish!")
    logger.error("Error: %s", error)
</code></pre></div></div>

<p>See the documentation for each of these classes below for more detail on how
to use them.</p>

<h2 id="publishmanager">PublishManager</h2>

<p>This class gives developers direct access to the same methods and data
structures used by the Publish UI. You can create an instance of this class
directly via the configured publish app like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># need to have an engine running in a context where the publisher has been
# configured.
engine = sgtk.platform.current_engine()

# get the publish app instance from the engine's list of configured apps
publish_app = engine.apps.get("tk-multi-publish2")

# ensure we have the publisher instance.
if not publish_app:
    raise Exception("The publisher is not configured for this context.")

# create a new publish manager instance
manager = publish_app.create_publish_manager()
</code></pre></div></div>

<h2 id="publishtree">PublishTree</h2>

<h2 id="publishitem">PublishItem</h2>

<h2 id="publishtask">PublishTask</h2>

<h2 id="publishdata">PublishData</h2>

<h2 id="pluginsetting">PluginSetting</h2>


          
        </div>
      </div>
    </div>
  </div>
</html>
